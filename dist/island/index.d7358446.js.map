{"mappings":"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","sources":["node_modules/@parcel/runtime-browser-hmr/lib/runtime-ae0b292537a79c5d.js","packages/island/main/main.js","node_modules/three/examples/jsm/objects/Water2.js","node_modules/three/examples/jsm/objects/Reflector.js","node_modules/three/examples/jsm/objects/Refractor.js","node_modules/three/examples/jsm/loaders/DRACOLoader.js"],"sourcesContent":["var HMR_HOST = null;var HMR_PORT = null;var HMR_SECURE = false;var HMR_ENV_HASH = \"d6ea1d42532a7575\";module.bundle.HMR_BUNDLE_ID = \"07f3831cd7358446\";\"use strict\";\n\n/* global HMR_HOST, HMR_PORT, HMR_ENV_HASH, HMR_SECURE, chrome, browser, globalThis, __parcel__import__, __parcel__importScripts__, ServiceWorkerGlobalScope */\n\n/*::\nimport type {\n  HMRAsset,\n  HMRMessage,\n} from '@parcel/reporter-dev-server/src/HMRServer.js';\ninterface ParcelRequire {\n  (string): mixed;\n  cache: {|[string]: ParcelModule|};\n  hotData: mixed;\n  Module: any;\n  parent: ?ParcelRequire;\n  isParcelRequire: true;\n  modules: {|[string]: [Function, {|[string]: string|}]|};\n  HMR_BUNDLE_ID: string;\n  root: ParcelRequire;\n}\ninterface ParcelModule {\n  hot: {|\n    data: mixed,\n    accept(cb: (Function) => void): void,\n    dispose(cb: (mixed) => void): void,\n    // accept(deps: Array<string> | string, cb: (Function) => void): void,\n    // decline(): void,\n    _acceptCallbacks: Array<(Function) => void>,\n    _disposeCallbacks: Array<(mixed) => void>,\n  |};\n}\ninterface ExtensionContext {\n  runtime: {|\n    reload(): void,\n    getURL(url: string): string;\n    getManifest(): {manifest_version: number, ...};\n  |};\n}\ndeclare var module: {bundle: ParcelRequire, ...};\ndeclare var HMR_HOST: string;\ndeclare var HMR_PORT: string;\ndeclare var HMR_ENV_HASH: string;\ndeclare var HMR_SECURE: boolean;\ndeclare var chrome: ExtensionContext;\ndeclare var browser: ExtensionContext;\ndeclare var __parcel__import__: (string) => Promise<void>;\ndeclare var __parcel__importScripts__: (string) => Promise<void>;\ndeclare var globalThis: typeof self;\ndeclare var ServiceWorkerGlobalScope: Object;\n*/\nvar OVERLAY_ID = '__parcel__error__overlay__';\nvar OldModule = module.bundle.Module;\n\nfunction Module(moduleName) {\n  OldModule.call(this, moduleName);\n  this.hot = {\n    data: module.bundle.hotData,\n    _acceptCallbacks: [],\n    _disposeCallbacks: [],\n    accept: function (fn) {\n      this._acceptCallbacks.push(fn || function () {});\n    },\n    dispose: function (fn) {\n      this._disposeCallbacks.push(fn);\n    }\n  };\n  module.bundle.hotData = undefined;\n}\n\nmodule.bundle.Module = Module;\nvar checkedAssets\n/*: {|[string]: boolean|} */\n, acceptedAssets\n/*: {|[string]: boolean|} */\n, assetsToAccept\n/*: Array<[ParcelRequire, string]> */\n;\n\nfunction getHostname() {\n  return HMR_HOST || (location.protocol.indexOf('http') === 0 ? location.hostname : 'localhost');\n}\n\nfunction getPort() {\n  return HMR_PORT || location.port;\n} // eslint-disable-next-line no-redeclare\n\n\nvar parent = module.bundle.parent;\n\nif ((!parent || !parent.isParcelRequire) && typeof WebSocket !== 'undefined') {\n  var hostname = getHostname();\n  var port = getPort();\n  var protocol = HMR_SECURE || location.protocol == 'https:' && !/localhost|127.0.0.1|0.0.0.0/.test(hostname) ? 'wss' : 'ws';\n  var ws = new WebSocket(protocol + '://' + hostname + (port ? ':' + port : '') + '/'); // Web extension context\n\n  var extCtx = typeof chrome === 'undefined' ? typeof browser === 'undefined' ? null : browser : chrome; // Safari doesn't support sourceURL in error stacks.\n  // eval may also be disabled via CSP, so do a quick check.\n\n  var supportsSourceURL = false;\n\n  try {\n    (0, eval)('throw new Error(\"test\"); //# sourceURL=test.js');\n  } catch (err) {\n    supportsSourceURL = err.stack.includes('test.js');\n  } // $FlowFixMe\n\n\n  ws.onmessage = async function (event\n  /*: {data: string, ...} */\n  ) {\n    checkedAssets = {}\n    /*: {|[string]: boolean|} */\n    ;\n    acceptedAssets = {}\n    /*: {|[string]: boolean|} */\n    ;\n    assetsToAccept = [];\n    var data\n    /*: HMRMessage */\n    = JSON.parse(event.data);\n\n    if (data.type === 'update') {\n      // Remove error overlay if there is one\n      if (typeof document !== 'undefined') {\n        removeErrorOverlay();\n      }\n\n      let assets = data.assets.filter(asset => asset.envHash === HMR_ENV_HASH); // Handle HMR Update\n\n      let handled = assets.every(asset => {\n        return asset.type === 'css' || asset.type === 'js' && hmrAcceptCheck(module.bundle.root, asset.id, asset.depsByBundle);\n      });\n\n      if (handled) {\n        console.clear(); // Dispatch custom event so other runtimes (e.g React Refresh) are aware.\n\n        if (typeof window !== 'undefined' && typeof CustomEvent !== 'undefined') {\n          window.dispatchEvent(new CustomEvent('parcelhmraccept'));\n        }\n\n        await hmrApplyUpdates(assets);\n\n        for (var i = 0; i < assetsToAccept.length; i++) {\n          var id = assetsToAccept[i][1];\n\n          if (!acceptedAssets[id]) {\n            hmrAcceptRun(assetsToAccept[i][0], id);\n          }\n        }\n      } else fullReload();\n    }\n\n    if (data.type === 'error') {\n      // Log parcel errors to console\n      for (let ansiDiagnostic of data.diagnostics.ansi) {\n        let stack = ansiDiagnostic.codeframe ? ansiDiagnostic.codeframe : ansiDiagnostic.stack;\n        console.error('🚨 [parcel]: ' + ansiDiagnostic.message + '\\n' + stack + '\\n\\n' + ansiDiagnostic.hints.join('\\n'));\n      }\n\n      if (typeof document !== 'undefined') {\n        // Render the fancy html overlay\n        removeErrorOverlay();\n        var overlay = createErrorOverlay(data.diagnostics.html); // $FlowFixMe\n\n        document.body.appendChild(overlay);\n      }\n    }\n  };\n\n  ws.onerror = function (e) {\n    console.error(e.message);\n  };\n\n  ws.onclose = function () {\n    console.warn('[parcel] 🚨 Connection to the HMR server was lost');\n  };\n}\n\nfunction removeErrorOverlay() {\n  var overlay = document.getElementById(OVERLAY_ID);\n\n  if (overlay) {\n    overlay.remove();\n    console.log('[parcel] ✨ Error resolved');\n  }\n}\n\nfunction createErrorOverlay(diagnostics) {\n  var overlay = document.createElement('div');\n  overlay.id = OVERLAY_ID;\n  let errorHTML = '<div style=\"background: black; opacity: 0.85; font-size: 16px; color: white; position: fixed; height: 100%; width: 100%; top: 0px; left: 0px; padding: 30px; font-family: Menlo, Consolas, monospace; z-index: 9999;\">';\n\n  for (let diagnostic of diagnostics) {\n    let stack = diagnostic.frames.length ? diagnostic.frames.reduce((p, frame) => {\n      return `${p}\n<a href=\"/__parcel_launch_editor?file=${encodeURIComponent(frame.location)}\" style=\"text-decoration: underline; color: #888\" onclick=\"fetch(this.href); return false\">${frame.location}</a>\n${frame.code}`;\n    }, '') : diagnostic.stack;\n    errorHTML += `\n      <div>\n        <div style=\"font-size: 18px; font-weight: bold; margin-top: 20px;\">\n          🚨 ${diagnostic.message}\n        </div>\n        <pre>${stack}</pre>\n        <div>\n          ${diagnostic.hints.map(hint => '<div>💡 ' + hint + '</div>').join('')}\n        </div>\n        ${diagnostic.documentation ? `<div>📝 <a style=\"color: violet\" href=\"${diagnostic.documentation}\" target=\"_blank\">Learn more</a></div>` : ''}\n      </div>\n    `;\n  }\n\n  errorHTML += '</div>';\n  overlay.innerHTML = errorHTML;\n  return overlay;\n}\n\nfunction fullReload() {\n  if ('reload' in location) {\n    location.reload();\n  } else if (extCtx && extCtx.runtime && extCtx.runtime.reload) {\n    extCtx.runtime.reload();\n  }\n}\n\nfunction getParents(bundle, id)\n/*: Array<[ParcelRequire, string]> */\n{\n  var modules = bundle.modules;\n\n  if (!modules) {\n    return [];\n  }\n\n  var parents = [];\n  var k, d, dep;\n\n  for (k in modules) {\n    for (d in modules[k][1]) {\n      dep = modules[k][1][d];\n\n      if (dep === id || Array.isArray(dep) && dep[dep.length - 1] === id) {\n        parents.push([bundle, k]);\n      }\n    }\n  }\n\n  if (bundle.parent) {\n    parents = parents.concat(getParents(bundle.parent, id));\n  }\n\n  return parents;\n}\n\nfunction updateLink(link) {\n  var newLink = link.cloneNode();\n\n  newLink.onload = function () {\n    if (link.parentNode !== null) {\n      // $FlowFixMe\n      link.parentNode.removeChild(link);\n    }\n  };\n\n  newLink.setAttribute('href', // $FlowFixMe\n  link.getAttribute('href').split('?')[0] + '?' + Date.now()); // $FlowFixMe\n\n  link.parentNode.insertBefore(newLink, link.nextSibling);\n}\n\nvar cssTimeout = null;\n\nfunction reloadCSS() {\n  if (cssTimeout) {\n    return;\n  }\n\n  cssTimeout = setTimeout(function () {\n    var links = document.querySelectorAll('link[rel=\"stylesheet\"]');\n\n    for (var i = 0; i < links.length; i++) {\n      // $FlowFixMe[incompatible-type]\n      var href\n      /*: string */\n      = links[i].getAttribute('href');\n      var hostname = getHostname();\n      var servedFromHMRServer = hostname === 'localhost' ? new RegExp('^(https?:\\\\/\\\\/(0.0.0.0|127.0.0.1)|localhost):' + getPort()).test(href) : href.indexOf(hostname + ':' + getPort());\n      var absolute = /^https?:\\/\\//i.test(href) && href.indexOf(location.origin) !== 0 && !servedFromHMRServer;\n\n      if (!absolute) {\n        updateLink(links[i]);\n      }\n    }\n\n    cssTimeout = null;\n  }, 50);\n}\n\nfunction hmrDownload(asset) {\n  if (asset.type === 'js') {\n    if (typeof document !== 'undefined') {\n      let script = document.createElement('script');\n      script.src = asset.url + '?t=' + Date.now();\n\n      if (asset.outputFormat === 'esmodule') {\n        script.type = 'module';\n      }\n\n      return new Promise((resolve, reject) => {\n        var _document$head;\n\n        script.onload = () => resolve(script);\n\n        script.onerror = reject;\n        (_document$head = document.head) === null || _document$head === void 0 ? void 0 : _document$head.appendChild(script);\n      });\n    } else if (typeof importScripts === 'function') {\n      // Worker scripts\n      if (asset.outputFormat === 'esmodule') {\n        return __parcel__import__(asset.url + '?t=' + Date.now());\n      } else {\n        return new Promise((resolve, reject) => {\n          try {\n            __parcel__importScripts__(asset.url + '?t=' + Date.now());\n\n            resolve();\n          } catch (err) {\n            reject(err);\n          }\n        });\n      }\n    }\n  }\n}\n\nasync function hmrApplyUpdates(assets) {\n  global.parcelHotUpdate = Object.create(null);\n  let scriptsToRemove;\n\n  try {\n    // If sourceURL comments aren't supported in eval, we need to load\n    // the update from the dev server over HTTP so that stack traces\n    // are correct in errors/logs. This is much slower than eval, so\n    // we only do it if needed (currently just Safari).\n    // https://bugs.webkit.org/show_bug.cgi?id=137297\n    // This path is also taken if a CSP disallows eval.\n    if (!supportsSourceURL) {\n      let promises = assets.map(asset => {\n        var _hmrDownload;\n\n        return (_hmrDownload = hmrDownload(asset)) === null || _hmrDownload === void 0 ? void 0 : _hmrDownload.catch(err => {\n          // Web extension bugfix for Chromium\n          // https://bugs.chromium.org/p/chromium/issues/detail?id=1255412#c12\n          if (extCtx && extCtx.runtime && extCtx.runtime.getManifest().manifest_version == 3) {\n            if (typeof ServiceWorkerGlobalScope != 'undefined' && global instanceof ServiceWorkerGlobalScope) {\n              extCtx.runtime.reload();\n              return;\n            }\n\n            asset.url = extCtx.runtime.getURL('/__parcel_hmr_proxy__?url=' + encodeURIComponent(asset.url + '?t=' + Date.now()));\n            return hmrDownload(asset);\n          }\n\n          throw err;\n        });\n      });\n      scriptsToRemove = await Promise.all(promises);\n    }\n\n    assets.forEach(function (asset) {\n      hmrApply(module.bundle.root, asset);\n    });\n  } finally {\n    delete global.parcelHotUpdate;\n\n    if (scriptsToRemove) {\n      scriptsToRemove.forEach(script => {\n        if (script) {\n          var _document$head2;\n\n          (_document$head2 = document.head) === null || _document$head2 === void 0 ? void 0 : _document$head2.removeChild(script);\n        }\n      });\n    }\n  }\n}\n\nfunction hmrApply(bundle\n/*: ParcelRequire */\n, asset\n/*:  HMRAsset */\n) {\n  var modules = bundle.modules;\n\n  if (!modules) {\n    return;\n  }\n\n  if (asset.type === 'css') {\n    reloadCSS();\n  } else if (asset.type === 'js') {\n    let deps = asset.depsByBundle[bundle.HMR_BUNDLE_ID];\n\n    if (deps) {\n      if (modules[asset.id]) {\n        // Remove dependencies that are removed and will become orphaned.\n        // This is necessary so that if the asset is added back again, the cache is gone, and we prevent a full page reload.\n        let oldDeps = modules[asset.id][1];\n\n        for (let dep in oldDeps) {\n          if (!deps[dep] || deps[dep] !== oldDeps[dep]) {\n            let id = oldDeps[dep];\n            let parents = getParents(module.bundle.root, id);\n\n            if (parents.length === 1) {\n              hmrDelete(module.bundle.root, id);\n            }\n          }\n        }\n      }\n\n      if (supportsSourceURL) {\n        // Global eval. We would use `new Function` here but browser\n        // support for source maps is better with eval.\n        (0, eval)(asset.output);\n      } // $FlowFixMe\n\n\n      let fn = global.parcelHotUpdate[asset.id];\n      modules[asset.id] = [fn, deps];\n    } else if (bundle.parent) {\n      hmrApply(bundle.parent, asset);\n    }\n  }\n}\n\nfunction hmrDelete(bundle, id) {\n  let modules = bundle.modules;\n\n  if (!modules) {\n    return;\n  }\n\n  if (modules[id]) {\n    // Collect dependencies that will become orphaned when this module is deleted.\n    let deps = modules[id][1];\n    let orphans = [];\n\n    for (let dep in deps) {\n      let parents = getParents(module.bundle.root, deps[dep]);\n\n      if (parents.length === 1) {\n        orphans.push(deps[dep]);\n      }\n    } // Delete the module. This must be done before deleting dependencies in case of circular dependencies.\n\n\n    delete modules[id];\n    delete bundle.cache[id]; // Now delete the orphans.\n\n    orphans.forEach(id => {\n      hmrDelete(module.bundle.root, id);\n    });\n  } else if (bundle.parent) {\n    hmrDelete(bundle.parent, id);\n  }\n}\n\nfunction hmrAcceptCheck(bundle\n/*: ParcelRequire */\n, id\n/*: string */\n, depsByBundle\n/*: ?{ [string]: { [string]: string } }*/\n) {\n  if (hmrAcceptCheckOne(bundle, id, depsByBundle)) {\n    return true;\n  } // Traverse parents breadth first. All possible ancestries must accept the HMR update, or we'll reload.\n\n\n  let parents = getParents(module.bundle.root, id);\n  let accepted = false;\n\n  while (parents.length > 0) {\n    let v = parents.shift();\n    let a = hmrAcceptCheckOne(v[0], v[1], null);\n\n    if (a) {\n      // If this parent accepts, stop traversing upward, but still consider siblings.\n      accepted = true;\n    } else {\n      // Otherwise, queue the parents in the next level upward.\n      let p = getParents(module.bundle.root, v[1]);\n\n      if (p.length === 0) {\n        // If there are no parents, then we've reached an entry without accepting. Reload.\n        accepted = false;\n        break;\n      }\n\n      parents.push(...p);\n    }\n  }\n\n  return accepted;\n}\n\nfunction hmrAcceptCheckOne(bundle\n/*: ParcelRequire */\n, id\n/*: string */\n, depsByBundle\n/*: ?{ [string]: { [string]: string } }*/\n) {\n  var modules = bundle.modules;\n\n  if (!modules) {\n    return;\n  }\n\n  if (depsByBundle && !depsByBundle[bundle.HMR_BUNDLE_ID]) {\n    // If we reached the root bundle without finding where the asset should go,\n    // there's nothing to do. Mark as \"accepted\" so we don't reload the page.\n    if (!bundle.parent) {\n      return true;\n    }\n\n    return hmrAcceptCheck(bundle.parent, id, depsByBundle);\n  }\n\n  if (checkedAssets[id]) {\n    return true;\n  }\n\n  checkedAssets[id] = true;\n  var cached = bundle.cache[id];\n  assetsToAccept.push([bundle, id]);\n\n  if (!cached || cached.hot && cached.hot._acceptCallbacks.length) {\n    return true;\n  }\n}\n\nfunction hmrAcceptRun(bundle\n/*: ParcelRequire */\n, id\n/*: string */\n) {\n  var cached = bundle.cache[id];\n  bundle.hotData = {};\n\n  if (cached && cached.hot) {\n    cached.hot.data = bundle.hotData;\n  }\n\n  if (cached && cached.hot && cached.hot._disposeCallbacks.length) {\n    cached.hot._disposeCallbacks.forEach(function (cb) {\n      cb(bundle.hotData);\n    });\n  }\n\n  delete bundle.cache[id];\n  bundle(id);\n  cached = bundle.cache[id];\n\n  if (cached && cached.hot && cached.hot._acceptCallbacks.length) {\n    cached.hot._acceptCallbacks.forEach(function (cb) {\n      var assetsToAlsoAccept = cb(function () {\n        return getParents(module.bundle.root, id);\n      });\n\n      if (assetsToAlsoAccept && assetsToAccept.length) {\n        // $FlowFixMe[method-unbinding]\n        assetsToAccept.push.apply(assetsToAccept, assetsToAlsoAccept);\n      }\n    });\n  }\n\n  acceptedAssets[id] = true;\n}","import * as THREE from \"three\";\r\n// 导入控制器\r\nimport { OrbitControls } from \"three/examples/jsm/controls/OrbitControls\";\r\n// 导入水面\r\nimport { Water } from \"three/examples/jsm/objects/Water2\";\r\n// 导入gltf载入库\r\nimport { GLTFLoader } from \"three/examples/jsm/loaders/GLTFLoader\";\r\nimport { DRACOLoader } from \"three/examples/jsm/loaders/DRACOLoader\";\r\nimport { RGBELoader } from \"three/examples/jsm/loaders/RGBELoader\";\r\n// 初始化场景\r\nconst scene = new THREE.Scene();\r\n\r\n// 初始化相机\r\nconst camera = new THREE.PerspectiveCamera(\r\n  75,\r\n  window.innerWidth / window.innerHeight,\r\n  0.1,\r\n  2000\r\n);\r\n\r\n// 设置相机位置\r\ncamera.position.set(-50, 50, 130);\r\n// 更新摄像头宽高比例\r\ncamera.aspect = window.innerWidth / window.innerHeight;\r\n// 更新摄像头投影矩阵\r\ncamera.updateProjectionMatrix();\r\n\r\nscene.add(camera);\r\n\r\n// 初始化渲染器\r\nconst renderer = new THREE.WebGLRenderer({\r\n  // 设置抗锯齿\r\n  antialias: true,\r\n  //   对数深度缓冲区\r\n  logarithmicDepthBuffer: true,\r\n});\r\nrenderer.outputEncoding = THREE.sRGBEncoding;\r\n\r\n// 设置渲染器宽高\r\nrenderer.setSize(window.innerWidth, window.innerHeight);\r\n\r\n// 监听屏幕的大小改变，修改渲染器的宽高，相机的比例\r\nwindow.addEventListener(\"resize\", () => {\r\n  camera.aspect = window.innerWidth / window.innerHeight;\r\n  camera.updateProjectionMatrix();\r\n  renderer.setSize(window.innerWidth, window.innerHeight);\r\n});\r\n\r\n// 将渲染器添加到页面\r\ndocument.body.appendChild(renderer.domElement);\r\n\r\n// 实例化控制器\r\nconst controls = new OrbitControls(camera, renderer.domElement);\r\n\r\n\r\n// 添加平面\r\n// const planeGeometry = new THREE.PlaneGeometry(100, 100);\r\n// const planeMaterial = new THREE.MeshBasicMaterial({\r\n//   color: 0xffffff,\r\n// });\r\n// const plane = new THREE.Mesh(planeGeometry, planeMaterial);\r\n// scene.add(plane);\r\n\r\n// 创建一个巨大的天空球体\r\nlet texture = new THREE.TextureLoader().load(\"/textures/sky.jpg\");\r\nconst skyGeometry = new THREE.SphereGeometry(1000, 60, 60);\r\nconst skyMaterial = new THREE.MeshBasicMaterial({\r\n  map: texture,\r\n});\r\nskyGeometry.scale(1, 1, -1);\r\nconst sky = new THREE.Mesh(skyGeometry, skyMaterial);\r\n\r\nscene.add(sky);\r\n\r\n// 视频纹理\r\nconst video = document.createElement(\"video\");\r\nvideo.src = \"/textures/sky.mp4\";\r\nvideo.loop = true;\r\n\r\nwindow.addEventListener(\"click\", (e) => {\r\n  // 当鼠标移动的时候播放视频\r\n  //   判断视频是否处于播放状态\r\n  if (video.paused) {\r\n    video.play();\r\n    let texture = new THREE.VideoTexture(video);\r\n    skyMaterial.map = texture;\r\n    skyMaterial.map.needsUpdate = true;\r\n  }\r\n});\r\n\r\n// 载入环境纹理hdr\r\nconst hdrLoader = new RGBELoader();\r\nhdrLoader.loadAsync(\"/assets/050.hdr\").then((texture) => {\r\n  texture.mapping = THREE.EquirectangularReflectionMapping;\r\n  scene.background = texture;\r\n  scene.environment = texture;\r\n});\r\n\r\n// 添加平行光\r\nconst light = new THREE.DirectionalLight(0xffffff, 1);\r\nlight.position.set(-100, 100, 10);\r\nscene.add(light);\r\n\r\n// 创建水面\r\nconst waterGeometry = new THREE.CircleGeometry(300, 64);\r\nconst water = new Water(waterGeometry, {\r\n  textureWidth: 1024,\r\n  textureHeight: 1024,\r\n  color: 0xeeeeff,\r\n  flowDirection: new THREE.Vector2(1, 1),\r\n  scale: 1,\r\n  normalMap0: new THREE.TextureLoader().load(\"/textures/water/Water_1_M_Normal.jpg\"),\r\n  normalMap1: new THREE.TextureLoader().load(\"/textures/water/Water_2_M_Normal.jpg\")\r\n});\r\nwater.position.y = 3;\r\n// 水面旋转至水平\r\nwater.rotation.x = -Math.PI / 2;\r\nscene.add(water);\r\n\r\n// 添加小岛模型\r\n// 实例化gltf载入库\r\nconst loader = new GLTFLoader();\r\n// 实例化draco载入库\r\nconst dracoLoader = new DRACOLoader();\r\n// 添加draco载入库\r\ndracoLoader.setDecoderPath(\"/draco/\");\r\n// 添加draco载入库\r\nloader.setDRACOLoader(dracoLoader);\r\n\r\nloader.load(\"/model/island2.glb\", (gltf) => {\r\n  scene.add(gltf.scene);\r\n});\r\n\r\nfunction render() {\r\n  // 渲染场景\r\n  renderer.render(scene, camera);\r\n  // 引擎自动更新渲染器\r\n  requestAnimationFrame(render);\r\n}\r\nrender();","import {\n\tClock,\n\tColor,\n\tMatrix4,\n\tMesh,\n\tRepeatWrapping,\n\tShaderMaterial,\n\tTextureLoader,\n\tUniformsLib,\n\tUniformsUtils,\n\tVector2,\n\tVector4\n} from 'three';\nimport { Reflector } from '../objects/Reflector.js';\nimport { Refractor } from '../objects/Refractor.js';\n\n/**\n * References:\n *\thttps://alex.vlachos.com/graphics/Vlachos-SIGGRAPH10-WaterFlow.pdf\n *\thttp://graphicsrunner.blogspot.de/2010/08/water-using-flow-maps.html\n *\n */\n\nclass Water extends Mesh {\n\n\tconstructor( geometry, options = {} ) {\n\n\t\tsuper( geometry );\n\n\t\tthis.isWater = true;\n\n\t\tthis.type = 'Water';\n\n\t\tconst scope = this;\n\n\t\tconst color = ( options.color !== undefined ) ? new Color( options.color ) : new Color( 0xFFFFFF );\n\t\tconst textureWidth = options.textureWidth || 512;\n\t\tconst textureHeight = options.textureHeight || 512;\n\t\tconst clipBias = options.clipBias || 0;\n\t\tconst flowDirection = options.flowDirection || new Vector2( 1, 0 );\n\t\tconst flowSpeed = options.flowSpeed || 0.03;\n\t\tconst reflectivity = options.reflectivity || 0.02;\n\t\tconst scale = options.scale || 1;\n\t\tconst shader = options.shader || Water.WaterShader;\n\n\t\tconst textureLoader = new TextureLoader();\n\n\t\tconst flowMap = options.flowMap || undefined;\n\t\tconst normalMap0 = options.normalMap0 || textureLoader.load( 'textures/water/Water_1_M_Normal.jpg' );\n\t\tconst normalMap1 = options.normalMap1 || textureLoader.load( 'textures/water/Water_2_M_Normal.jpg' );\n\n\t\tconst cycle = 0.15; // a cycle of a flow map phase\n\t\tconst halfCycle = cycle * 0.5;\n\t\tconst textureMatrix = new Matrix4();\n\t\tconst clock = new Clock();\n\n\t\t// internal components\n\n\t\tif ( Reflector === undefined ) {\n\n\t\t\tconsole.error( 'THREE.Water: Required component Reflector not found.' );\n\t\t\treturn;\n\n\t\t}\n\n\t\tif ( Refractor === undefined ) {\n\n\t\t\tconsole.error( 'THREE.Water: Required component Refractor not found.' );\n\t\t\treturn;\n\n\t\t}\n\n\t\tconst reflector = new Reflector( geometry, {\n\t\t\ttextureWidth: textureWidth,\n\t\t\ttextureHeight: textureHeight,\n\t\t\tclipBias: clipBias\n\t\t} );\n\n\t\tconst refractor = new Refractor( geometry, {\n\t\t\ttextureWidth: textureWidth,\n\t\t\ttextureHeight: textureHeight,\n\t\t\tclipBias: clipBias\n\t\t} );\n\n\t\treflector.matrixAutoUpdate = false;\n\t\trefractor.matrixAutoUpdate = false;\n\n\t\t// material\n\n\t\tthis.material = new ShaderMaterial( {\n\t\t\tuniforms: UniformsUtils.merge( [\n\t\t\t\tUniformsLib[ 'fog' ],\n\t\t\t\tshader.uniforms\n\t\t\t] ),\n\t\t\tvertexShader: shader.vertexShader,\n\t\t\tfragmentShader: shader.fragmentShader,\n\t\t\ttransparent: true,\n\t\t\tfog: true\n\t\t} );\n\n\t\tif ( flowMap !== undefined ) {\n\n\t\t\tthis.material.defines.USE_FLOWMAP = '';\n\t\t\tthis.material.uniforms[ 'tFlowMap' ] = {\n\t\t\t\ttype: 't',\n\t\t\t\tvalue: flowMap\n\t\t\t};\n\n\t\t} else {\n\n\t\t\tthis.material.uniforms[ 'flowDirection' ] = {\n\t\t\t\ttype: 'v2',\n\t\t\t\tvalue: flowDirection\n\t\t\t};\n\n\t\t}\n\n\t\t// maps\n\n\t\tnormalMap0.wrapS = normalMap0.wrapT = RepeatWrapping;\n\t\tnormalMap1.wrapS = normalMap1.wrapT = RepeatWrapping;\n\n\t\tthis.material.uniforms[ 'tReflectionMap' ].value = reflector.getRenderTarget().texture;\n\t\tthis.material.uniforms[ 'tRefractionMap' ].value = refractor.getRenderTarget().texture;\n\t\tthis.material.uniforms[ 'tNormalMap0' ].value = normalMap0;\n\t\tthis.material.uniforms[ 'tNormalMap1' ].value = normalMap1;\n\n\t\t// water\n\n\t\tthis.material.uniforms[ 'color' ].value = color;\n\t\tthis.material.uniforms[ 'reflectivity' ].value = reflectivity;\n\t\tthis.material.uniforms[ 'textureMatrix' ].value = textureMatrix;\n\n\t\t// inital values\n\n\t\tthis.material.uniforms[ 'config' ].value.x = 0; // flowMapOffset0\n\t\tthis.material.uniforms[ 'config' ].value.y = halfCycle; // flowMapOffset1\n\t\tthis.material.uniforms[ 'config' ].value.z = halfCycle; // halfCycle\n\t\tthis.material.uniforms[ 'config' ].value.w = scale; // scale\n\n\t\t// functions\n\n\t\tfunction updateTextureMatrix( camera ) {\n\n\t\t\ttextureMatrix.set(\n\t\t\t\t0.5, 0.0, 0.0, 0.5,\n\t\t\t\t0.0, 0.5, 0.0, 0.5,\n\t\t\t\t0.0, 0.0, 0.5, 0.5,\n\t\t\t\t0.0, 0.0, 0.0, 1.0\n\t\t\t);\n\n\t\t\ttextureMatrix.multiply( camera.projectionMatrix );\n\t\t\ttextureMatrix.multiply( camera.matrixWorldInverse );\n\t\t\ttextureMatrix.multiply( scope.matrixWorld );\n\n\t\t}\n\n\t\tfunction updateFlow() {\n\n\t\t\tconst delta = clock.getDelta();\n\t\t\tconst config = scope.material.uniforms[ 'config' ];\n\n\t\t\tconfig.value.x += flowSpeed * delta; // flowMapOffset0\n\t\t\tconfig.value.y = config.value.x + halfCycle; // flowMapOffset1\n\n\t\t\t// Important: The distance between offsets should be always the value of \"halfCycle\".\n\t\t\t// Moreover, both offsets should be in the range of [ 0, cycle ].\n\t\t\t// This approach ensures a smooth water flow and avoids \"reset\" effects.\n\n\t\t\tif ( config.value.x >= cycle ) {\n\n\t\t\t\tconfig.value.x = 0;\n\t\t\t\tconfig.value.y = halfCycle;\n\n\t\t\t} else if ( config.value.y >= cycle ) {\n\n\t\t\t\tconfig.value.y = config.value.y - cycle;\n\n\t\t\t}\n\n\t\t}\n\n\t\t//\n\n\t\tthis.onBeforeRender = function ( renderer, scene, camera ) {\n\n\t\t\tupdateTextureMatrix( camera );\n\t\t\tupdateFlow();\n\n\t\t\tscope.visible = false;\n\n\t\t\treflector.matrixWorld.copy( scope.matrixWorld );\n\t\t\trefractor.matrixWorld.copy( scope.matrixWorld );\n\n\t\t\treflector.onBeforeRender( renderer, scene, camera );\n\t\t\trefractor.onBeforeRender( renderer, scene, camera );\n\n\t\t\tscope.visible = true;\n\n\t\t};\n\n\t}\n\n}\n\nWater.WaterShader = {\n\n\tuniforms: {\n\n\t\t'color': {\n\t\t\ttype: 'c',\n\t\t\tvalue: null\n\t\t},\n\n\t\t'reflectivity': {\n\t\t\ttype: 'f',\n\t\t\tvalue: 0\n\t\t},\n\n\t\t'tReflectionMap': {\n\t\t\ttype: 't',\n\t\t\tvalue: null\n\t\t},\n\n\t\t'tRefractionMap': {\n\t\t\ttype: 't',\n\t\t\tvalue: null\n\t\t},\n\n\t\t'tNormalMap0': {\n\t\t\ttype: 't',\n\t\t\tvalue: null\n\t\t},\n\n\t\t'tNormalMap1': {\n\t\t\ttype: 't',\n\t\t\tvalue: null\n\t\t},\n\n\t\t'textureMatrix': {\n\t\t\ttype: 'm4',\n\t\t\tvalue: null\n\t\t},\n\n\t\t'config': {\n\t\t\ttype: 'v4',\n\t\t\tvalue: new Vector4()\n\t\t}\n\n\t},\n\n\tvertexShader: /* glsl */`\n\n\t\t#include <common>\n\t\t#include <fog_pars_vertex>\n\t\t#include <logdepthbuf_pars_vertex>\n\n\t\tuniform mat4 textureMatrix;\n\n\t\tvarying vec4 vCoord;\n\t\tvarying vec2 vUv;\n\t\tvarying vec3 vToEye;\n\n\t\tvoid main() {\n\n\t\t\tvUv = uv;\n\t\t\tvCoord = textureMatrix * vec4( position, 1.0 );\n\n\t\t\tvec4 worldPosition = modelMatrix * vec4( position, 1.0 );\n\t\t\tvToEye = cameraPosition - worldPosition.xyz;\n\n\t\t\tvec4 mvPosition =  viewMatrix * worldPosition; // used in fog_vertex\n\t\t\tgl_Position = projectionMatrix * mvPosition;\n\n\t\t\t#include <logdepthbuf_vertex>\n\t\t\t#include <fog_vertex>\n\n\t\t}`,\n\n\tfragmentShader: /* glsl */`\n\n\t\t#include <common>\n\t\t#include <fog_pars_fragment>\n\t\t#include <logdepthbuf_pars_fragment>\n\n\t\tuniform sampler2D tReflectionMap;\n\t\tuniform sampler2D tRefractionMap;\n\t\tuniform sampler2D tNormalMap0;\n\t\tuniform sampler2D tNormalMap1;\n\n\t\t#ifdef USE_FLOWMAP\n\t\t\tuniform sampler2D tFlowMap;\n\t\t#else\n\t\t\tuniform vec2 flowDirection;\n\t\t#endif\n\n\t\tuniform vec3 color;\n\t\tuniform float reflectivity;\n\t\tuniform vec4 config;\n\n\t\tvarying vec4 vCoord;\n\t\tvarying vec2 vUv;\n\t\tvarying vec3 vToEye;\n\n\t\tvoid main() {\n\n\t\t\t#include <logdepthbuf_fragment>\n\n\t\t\tfloat flowMapOffset0 = config.x;\n\t\t\tfloat flowMapOffset1 = config.y;\n\t\t\tfloat halfCycle = config.z;\n\t\t\tfloat scale = config.w;\n\n\t\t\tvec3 toEye = normalize( vToEye );\n\n\t\t\t// determine flow direction\n\t\t\tvec2 flow;\n\t\t\t#ifdef USE_FLOWMAP\n\t\t\t\tflow = texture2D( tFlowMap, vUv ).rg * 2.0 - 1.0;\n\t\t\t#else\n\t\t\t\tflow = flowDirection;\n\t\t\t#endif\n\t\t\tflow.x *= - 1.0;\n\n\t\t\t// sample normal maps (distort uvs with flowdata)\n\t\t\tvec4 normalColor0 = texture2D( tNormalMap0, ( vUv * scale ) + flow * flowMapOffset0 );\n\t\t\tvec4 normalColor1 = texture2D( tNormalMap1, ( vUv * scale ) + flow * flowMapOffset1 );\n\n\t\t\t// linear interpolate to get the final normal color\n\t\t\tfloat flowLerp = abs( halfCycle - flowMapOffset0 ) / halfCycle;\n\t\t\tvec4 normalColor = mix( normalColor0, normalColor1, flowLerp );\n\n\t\t\t// calculate normal vector\n\t\t\tvec3 normal = normalize( vec3( normalColor.r * 2.0 - 1.0, normalColor.b,  normalColor.g * 2.0 - 1.0 ) );\n\n\t\t\t// calculate the fresnel term to blend reflection and refraction maps\n\t\t\tfloat theta = max( dot( toEye, normal ), 0.0 );\n\t\t\tfloat reflectance = reflectivity + ( 1.0 - reflectivity ) * pow( ( 1.0 - theta ), 5.0 );\n\n\t\t\t// calculate final uv coords\n\t\t\tvec3 coord = vCoord.xyz / vCoord.w;\n\t\t\tvec2 uv = coord.xy + coord.z * normal.xz * 0.05;\n\n\t\t\tvec4 reflectColor = texture2D( tReflectionMap, vec2( 1.0 - uv.x, uv.y ) );\n\t\t\tvec4 refractColor = texture2D( tRefractionMap, uv );\n\n\t\t\t// multiply water color with the mix of both textures\n\t\t\tgl_FragColor = vec4( color, 1.0 ) * mix( refractColor, reflectColor, reflectance );\n\n\t\t\t#include <tonemapping_fragment>\n\t\t\t#include <encodings_fragment>\n\t\t\t#include <fog_fragment>\n\n\t\t}`\n\n};\n\nexport { Water };\n","import {\n\tColor,\n\tMatrix4,\n\tMesh,\n\tPerspectiveCamera,\n\tPlane,\n\tShaderMaterial,\n\tUniformsUtils,\n\tVector3,\n\tVector4,\n\tWebGLRenderTarget,\n\tHalfFloatType,\n\tNoToneMapping,\n\tLinearEncoding\n} from 'three';\n\nclass Reflector extends Mesh {\n\n\tconstructor( geometry, options = {} ) {\n\n\t\tsuper( geometry );\n\n\t\tthis.isReflector = true;\n\n\t\tthis.type = 'Reflector';\n\t\tthis.camera = new PerspectiveCamera();\n\n\t\tconst scope = this;\n\n\t\tconst color = ( options.color !== undefined ) ? new Color( options.color ) : new Color( 0x7F7F7F );\n\t\tconst textureWidth = options.textureWidth || 512;\n\t\tconst textureHeight = options.textureHeight || 512;\n\t\tconst clipBias = options.clipBias || 0;\n\t\tconst shader = options.shader || Reflector.ReflectorShader;\n\t\tconst multisample = ( options.multisample !== undefined ) ? options.multisample : 4;\n\n\t\t//\n\n\t\tconst reflectorPlane = new Plane();\n\t\tconst normal = new Vector3();\n\t\tconst reflectorWorldPosition = new Vector3();\n\t\tconst cameraWorldPosition = new Vector3();\n\t\tconst rotationMatrix = new Matrix4();\n\t\tconst lookAtPosition = new Vector3( 0, 0, - 1 );\n\t\tconst clipPlane = new Vector4();\n\n\t\tconst view = new Vector3();\n\t\tconst target = new Vector3();\n\t\tconst q = new Vector4();\n\n\t\tconst textureMatrix = new Matrix4();\n\t\tconst virtualCamera = this.camera;\n\n\t\tconst renderTarget = new WebGLRenderTarget( textureWidth, textureHeight, { samples: multisample, type: HalfFloatType } );\n\n\t\tconst material = new ShaderMaterial( {\n\t\t\tuniforms: UniformsUtils.clone( shader.uniforms ),\n\t\t\tfragmentShader: shader.fragmentShader,\n\t\t\tvertexShader: shader.vertexShader\n\t\t} );\n\n\t\tmaterial.uniforms[ 'tDiffuse' ].value = renderTarget.texture;\n\t\tmaterial.uniforms[ 'color' ].value = color;\n\t\tmaterial.uniforms[ 'textureMatrix' ].value = textureMatrix;\n\n\t\tthis.material = material;\n\n\t\tthis.onBeforeRender = function ( renderer, scene, camera ) {\n\n\t\t\treflectorWorldPosition.setFromMatrixPosition( scope.matrixWorld );\n\t\t\tcameraWorldPosition.setFromMatrixPosition( camera.matrixWorld );\n\n\t\t\trotationMatrix.extractRotation( scope.matrixWorld );\n\n\t\t\tnormal.set( 0, 0, 1 );\n\t\t\tnormal.applyMatrix4( rotationMatrix );\n\n\t\t\tview.subVectors( reflectorWorldPosition, cameraWorldPosition );\n\n\t\t\t// Avoid rendering when reflector is facing away\n\n\t\t\tif ( view.dot( normal ) > 0 ) return;\n\n\t\t\tview.reflect( normal ).negate();\n\t\t\tview.add( reflectorWorldPosition );\n\n\t\t\trotationMatrix.extractRotation( camera.matrixWorld );\n\n\t\t\tlookAtPosition.set( 0, 0, - 1 );\n\t\t\tlookAtPosition.applyMatrix4( rotationMatrix );\n\t\t\tlookAtPosition.add( cameraWorldPosition );\n\n\t\t\ttarget.subVectors( reflectorWorldPosition, lookAtPosition );\n\t\t\ttarget.reflect( normal ).negate();\n\t\t\ttarget.add( reflectorWorldPosition );\n\n\t\t\tvirtualCamera.position.copy( view );\n\t\t\tvirtualCamera.up.set( 0, 1, 0 );\n\t\t\tvirtualCamera.up.applyMatrix4( rotationMatrix );\n\t\t\tvirtualCamera.up.reflect( normal );\n\t\t\tvirtualCamera.lookAt( target );\n\n\t\t\tvirtualCamera.far = camera.far; // Used in WebGLBackground\n\n\t\t\tvirtualCamera.updateMatrixWorld();\n\t\t\tvirtualCamera.projectionMatrix.copy( camera.projectionMatrix );\n\n\t\t\t// Update the texture matrix\n\t\t\ttextureMatrix.set(\n\t\t\t\t0.5, 0.0, 0.0, 0.5,\n\t\t\t\t0.0, 0.5, 0.0, 0.5,\n\t\t\t\t0.0, 0.0, 0.5, 0.5,\n\t\t\t\t0.0, 0.0, 0.0, 1.0\n\t\t\t);\n\t\t\ttextureMatrix.multiply( virtualCamera.projectionMatrix );\n\t\t\ttextureMatrix.multiply( virtualCamera.matrixWorldInverse );\n\t\t\ttextureMatrix.multiply( scope.matrixWorld );\n\n\t\t\t// Now update projection matrix with new clip plane, implementing code from: http://www.terathon.com/code/oblique.html\n\t\t\t// Paper explaining this technique: http://www.terathon.com/lengyel/Lengyel-Oblique.pdf\n\t\t\treflectorPlane.setFromNormalAndCoplanarPoint( normal, reflectorWorldPosition );\n\t\t\treflectorPlane.applyMatrix4( virtualCamera.matrixWorldInverse );\n\n\t\t\tclipPlane.set( reflectorPlane.normal.x, reflectorPlane.normal.y, reflectorPlane.normal.z, reflectorPlane.constant );\n\n\t\t\tconst projectionMatrix = virtualCamera.projectionMatrix;\n\n\t\t\tq.x = ( Math.sign( clipPlane.x ) + projectionMatrix.elements[ 8 ] ) / projectionMatrix.elements[ 0 ];\n\t\t\tq.y = ( Math.sign( clipPlane.y ) + projectionMatrix.elements[ 9 ] ) / projectionMatrix.elements[ 5 ];\n\t\t\tq.z = - 1.0;\n\t\t\tq.w = ( 1.0 + projectionMatrix.elements[ 10 ] ) / projectionMatrix.elements[ 14 ];\n\n\t\t\t// Calculate the scaled plane vector\n\t\t\tclipPlane.multiplyScalar( 2.0 / clipPlane.dot( q ) );\n\n\t\t\t// Replacing the third row of the projection matrix\n\t\t\tprojectionMatrix.elements[ 2 ] = clipPlane.x;\n\t\t\tprojectionMatrix.elements[ 6 ] = clipPlane.y;\n\t\t\tprojectionMatrix.elements[ 10 ] = clipPlane.z + 1.0 - clipBias;\n\t\t\tprojectionMatrix.elements[ 14 ] = clipPlane.w;\n\n\t\t\t// Render\n\t\t\tscope.visible = false;\n\n\t\t\tconst currentRenderTarget = renderer.getRenderTarget();\n\n\t\t\tconst currentXrEnabled = renderer.xr.enabled;\n\t\t\tconst currentShadowAutoUpdate = renderer.shadowMap.autoUpdate;\n\t\t\tconst currentOutputEncoding = renderer.outputEncoding;\n\t\t\tconst currentToneMapping = renderer.toneMapping;\n\n\t\t\trenderer.xr.enabled = false; // Avoid camera modification\n\t\t\trenderer.shadowMap.autoUpdate = false; // Avoid re-computing shadows\n\t\t\trenderer.outputEncoding = LinearEncoding;\n\t\t\trenderer.toneMapping = NoToneMapping;\n\n\t\t\trenderer.setRenderTarget( renderTarget );\n\n\t\t\trenderer.state.buffers.depth.setMask( true ); // make sure the depth buffer is writable so it can be properly cleared, see #18897\n\n\t\t\tif ( renderer.autoClear === false ) renderer.clear();\n\t\t\trenderer.render( scene, virtualCamera );\n\n\t\t\trenderer.xr.enabled = currentXrEnabled;\n\t\t\trenderer.shadowMap.autoUpdate = currentShadowAutoUpdate;\n\t\t\trenderer.outputEncoding = currentOutputEncoding;\n\t\t\trenderer.toneMapping = currentToneMapping;\n\n\t\t\trenderer.setRenderTarget( currentRenderTarget );\n\n\t\t\t// Restore viewport\n\n\t\t\tconst viewport = camera.viewport;\n\n\t\t\tif ( viewport !== undefined ) {\n\n\t\t\t\trenderer.state.viewport( viewport );\n\n\t\t\t}\n\n\t\t\tscope.visible = true;\n\n\t\t};\n\n\t\tthis.getRenderTarget = function () {\n\n\t\t\treturn renderTarget;\n\n\t\t};\n\n\t\tthis.dispose = function () {\n\n\t\t\trenderTarget.dispose();\n\t\t\tscope.material.dispose();\n\n\t\t};\n\n\t}\n\n}\n\nReflector.ReflectorShader = {\n\n\tuniforms: {\n\n\t\t'color': {\n\t\t\tvalue: null\n\t\t},\n\n\t\t'tDiffuse': {\n\t\t\tvalue: null\n\t\t},\n\n\t\t'textureMatrix': {\n\t\t\tvalue: null\n\t\t}\n\n\t},\n\n\tvertexShader: /* glsl */`\n\t\tuniform mat4 textureMatrix;\n\t\tvarying vec4 vUv;\n\n\t\t#include <common>\n\t\t#include <logdepthbuf_pars_vertex>\n\n\t\tvoid main() {\n\n\t\t\tvUv = textureMatrix * vec4( position, 1.0 );\n\n\t\t\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n\n\t\t\t#include <logdepthbuf_vertex>\n\n\t\t}`,\n\n\tfragmentShader: /* glsl */`\n\t\tuniform vec3 color;\n\t\tuniform sampler2D tDiffuse;\n\t\tvarying vec4 vUv;\n\n\t\t#include <logdepthbuf_pars_fragment>\n\n\t\tfloat blendOverlay( float base, float blend ) {\n\n\t\t\treturn( base < 0.5 ? ( 2.0 * base * blend ) : ( 1.0 - 2.0 * ( 1.0 - base ) * ( 1.0 - blend ) ) );\n\n\t\t}\n\n\t\tvec3 blendOverlay( vec3 base, vec3 blend ) {\n\n\t\t\treturn vec3( blendOverlay( base.r, blend.r ), blendOverlay( base.g, blend.g ), blendOverlay( base.b, blend.b ) );\n\n\t\t}\n\n\t\tvoid main() {\n\n\t\t\t#include <logdepthbuf_fragment>\n\n\t\t\tvec4 base = texture2DProj( tDiffuse, vUv );\n\t\t\tgl_FragColor = vec4( blendOverlay( base.rgb, color ), 1.0 );\n\n\t\t\t#include <tonemapping_fragment>\n\t\t\t#include <encodings_fragment>\n\n\t\t}`\n};\n\nexport { Reflector };\n","import {\n\tColor,\n\tMatrix4,\n\tMesh,\n\tPerspectiveCamera,\n\tPlane,\n\tQuaternion,\n\tShaderMaterial,\n\tUniformsUtils,\n\tVector3,\n\tVector4,\n\tWebGLRenderTarget,\n\tLinearEncoding,\n\tNoToneMapping,\n\tHalfFloatType\n} from 'three';\n\nclass Refractor extends Mesh {\n\n\tconstructor( geometry, options = {} ) {\n\n\t\tsuper( geometry );\n\n\t\tthis.isRefractor = true;\n\n\t\tthis.type = 'Refractor';\n\t\tthis.camera = new PerspectiveCamera();\n\n\t\tconst scope = this;\n\n\t\tconst color = ( options.color !== undefined ) ? new Color( options.color ) : new Color( 0x7F7F7F );\n\t\tconst textureWidth = options.textureWidth || 512;\n\t\tconst textureHeight = options.textureHeight || 512;\n\t\tconst clipBias = options.clipBias || 0;\n\t\tconst shader = options.shader || Refractor.RefractorShader;\n\t\tconst multisample = ( options.multisample !== undefined ) ? options.multisample : 4;\n\n\t\t//\n\n\t\tconst virtualCamera = this.camera;\n\t\tvirtualCamera.matrixAutoUpdate = false;\n\t\tvirtualCamera.userData.refractor = true;\n\n\t\t//\n\n\t\tconst refractorPlane = new Plane();\n\t\tconst textureMatrix = new Matrix4();\n\n\t\t// render target\n\n\t\tconst renderTarget = new WebGLRenderTarget( textureWidth, textureHeight, { samples: multisample, type: HalfFloatType } );\n\n\t\t// material\n\n\t\tthis.material = new ShaderMaterial( {\n\t\t\tuniforms: UniformsUtils.clone( shader.uniforms ),\n\t\t\tvertexShader: shader.vertexShader,\n\t\t\tfragmentShader: shader.fragmentShader,\n\t\t\ttransparent: true // ensures, refractors are drawn from farthest to closest\n\t\t} );\n\n\t\tthis.material.uniforms[ 'color' ].value = color;\n\t\tthis.material.uniforms[ 'tDiffuse' ].value = renderTarget.texture;\n\t\tthis.material.uniforms[ 'textureMatrix' ].value = textureMatrix;\n\n\t\t// functions\n\n\t\tconst visible = ( function () {\n\n\t\t\tconst refractorWorldPosition = new Vector3();\n\t\t\tconst cameraWorldPosition = new Vector3();\n\t\t\tconst rotationMatrix = new Matrix4();\n\n\t\t\tconst view = new Vector3();\n\t\t\tconst normal = new Vector3();\n\n\t\t\treturn function visible( camera ) {\n\n\t\t\t\trefractorWorldPosition.setFromMatrixPosition( scope.matrixWorld );\n\t\t\t\tcameraWorldPosition.setFromMatrixPosition( camera.matrixWorld );\n\n\t\t\t\tview.subVectors( refractorWorldPosition, cameraWorldPosition );\n\n\t\t\t\trotationMatrix.extractRotation( scope.matrixWorld );\n\n\t\t\t\tnormal.set( 0, 0, 1 );\n\t\t\t\tnormal.applyMatrix4( rotationMatrix );\n\n\t\t\t\treturn view.dot( normal ) < 0;\n\n\t\t\t};\n\n\t\t} )();\n\n\t\tconst updateRefractorPlane = ( function () {\n\n\t\t\tconst normal = new Vector3();\n\t\t\tconst position = new Vector3();\n\t\t\tconst quaternion = new Quaternion();\n\t\t\tconst scale = new Vector3();\n\n\t\t\treturn function updateRefractorPlane() {\n\n\t\t\t\tscope.matrixWorld.decompose( position, quaternion, scale );\n\t\t\t\tnormal.set( 0, 0, 1 ).applyQuaternion( quaternion ).normalize();\n\n\t\t\t\t// flip the normal because we want to cull everything above the plane\n\n\t\t\t\tnormal.negate();\n\n\t\t\t\trefractorPlane.setFromNormalAndCoplanarPoint( normal, position );\n\n\t\t\t};\n\n\t\t} )();\n\n\t\tconst updateVirtualCamera = ( function () {\n\n\t\t\tconst clipPlane = new Plane();\n\t\t\tconst clipVector = new Vector4();\n\t\t\tconst q = new Vector4();\n\n\t\t\treturn function updateVirtualCamera( camera ) {\n\n\t\t\t\tvirtualCamera.matrixWorld.copy( camera.matrixWorld );\n\t\t\t\tvirtualCamera.matrixWorldInverse.copy( virtualCamera.matrixWorld ).invert();\n\t\t\t\tvirtualCamera.projectionMatrix.copy( camera.projectionMatrix );\n\t\t\t\tvirtualCamera.far = camera.far; // used in WebGLBackground\n\n\t\t\t\t// The following code creates an oblique view frustum for clipping.\n\t\t\t\t// see: Lengyel, Eric. “Oblique View Frustum Depth Projection and Clipping”.\n\t\t\t\t// Journal of Game Development, Vol. 1, No. 2 (2005), Charles River Media, pp. 5–16\n\n\t\t\t\tclipPlane.copy( refractorPlane );\n\t\t\t\tclipPlane.applyMatrix4( virtualCamera.matrixWorldInverse );\n\n\t\t\t\tclipVector.set( clipPlane.normal.x, clipPlane.normal.y, clipPlane.normal.z, clipPlane.constant );\n\n\t\t\t\t// calculate the clip-space corner point opposite the clipping plane and\n\t\t\t\t// transform it into camera space by multiplying it by the inverse of the projection matrix\n\n\t\t\t\tconst projectionMatrix = virtualCamera.projectionMatrix;\n\n\t\t\t\tq.x = ( Math.sign( clipVector.x ) + projectionMatrix.elements[ 8 ] ) / projectionMatrix.elements[ 0 ];\n\t\t\t\tq.y = ( Math.sign( clipVector.y ) + projectionMatrix.elements[ 9 ] ) / projectionMatrix.elements[ 5 ];\n\t\t\t\tq.z = - 1.0;\n\t\t\t\tq.w = ( 1.0 + projectionMatrix.elements[ 10 ] ) / projectionMatrix.elements[ 14 ];\n\n\t\t\t\t// calculate the scaled plane vector\n\n\t\t\t\tclipVector.multiplyScalar( 2.0 / clipVector.dot( q ) );\n\n\t\t\t\t// replacing the third row of the projection matrix\n\n\t\t\t\tprojectionMatrix.elements[ 2 ] = clipVector.x;\n\t\t\t\tprojectionMatrix.elements[ 6 ] = clipVector.y;\n\t\t\t\tprojectionMatrix.elements[ 10 ] = clipVector.z + 1.0 - clipBias;\n\t\t\t\tprojectionMatrix.elements[ 14 ] = clipVector.w;\n\n\t\t\t};\n\n\t\t} )();\n\n\t\t// This will update the texture matrix that is used for projective texture mapping in the shader.\n\t\t// see: http://developer.download.nvidia.com/assets/gamedev/docs/projective_texture_mapping.pdf\n\n\t\tfunction updateTextureMatrix( camera ) {\n\n\t\t\t// this matrix does range mapping to [ 0, 1 ]\n\n\t\t\ttextureMatrix.set(\n\t\t\t\t0.5, 0.0, 0.0, 0.5,\n\t\t\t\t0.0, 0.5, 0.0, 0.5,\n\t\t\t\t0.0, 0.0, 0.5, 0.5,\n\t\t\t\t0.0, 0.0, 0.0, 1.0\n\t\t\t);\n\n\t\t\t// we use \"Object Linear Texgen\", so we need to multiply the texture matrix T\n\t\t\t// (matrix above) with the projection and view matrix of the virtual camera\n\t\t\t// and the model matrix of the refractor\n\n\t\t\ttextureMatrix.multiply( camera.projectionMatrix );\n\t\t\ttextureMatrix.multiply( camera.matrixWorldInverse );\n\t\t\ttextureMatrix.multiply( scope.matrixWorld );\n\n\t\t}\n\n\t\t//\n\n\t\tfunction render( renderer, scene, camera ) {\n\n\t\t\tscope.visible = false;\n\n\t\t\tconst currentRenderTarget = renderer.getRenderTarget();\n\t\t\tconst currentXrEnabled = renderer.xr.enabled;\n\t\t\tconst currentShadowAutoUpdate = renderer.shadowMap.autoUpdate;\n\t\t\tconst currentOutputEncoding = renderer.outputEncoding;\n\t\t\tconst currentToneMapping = renderer.toneMapping;\n\n\t\t\trenderer.xr.enabled = false; // avoid camera modification\n\t\t\trenderer.shadowMap.autoUpdate = false; // avoid re-computing shadows\n\t\t\trenderer.outputEncoding = LinearEncoding;\n\t\t\trenderer.toneMapping = NoToneMapping;\n\n\t\t\trenderer.setRenderTarget( renderTarget );\n\t\t\tif ( renderer.autoClear === false ) renderer.clear();\n\t\t\trenderer.render( scene, virtualCamera );\n\n\t\t\trenderer.xr.enabled = currentXrEnabled;\n\t\t\trenderer.shadowMap.autoUpdate = currentShadowAutoUpdate;\n\t\t\trenderer.outputEncoding = currentOutputEncoding;\n\t\t\trenderer.toneMapping = currentToneMapping;\n\t\t\trenderer.setRenderTarget( currentRenderTarget );\n\n\t\t\t// restore viewport\n\n\t\t\tconst viewport = camera.viewport;\n\n\t\t\tif ( viewport !== undefined ) {\n\n\t\t\t\trenderer.state.viewport( viewport );\n\n\t\t\t}\n\n\t\t\tscope.visible = true;\n\n\t\t}\n\n\t\t//\n\n\t\tthis.onBeforeRender = function ( renderer, scene, camera ) {\n\n\t\t\t// ensure refractors are rendered only once per frame\n\n\t\t\tif ( camera.userData.refractor === true ) return;\n\n\t\t\t// avoid rendering when the refractor is viewed from behind\n\n\t\t\tif ( ! visible( camera ) === true ) return;\n\n\t\t\t// update\n\n\t\t\tupdateRefractorPlane();\n\n\t\t\tupdateTextureMatrix( camera );\n\n\t\t\tupdateVirtualCamera( camera );\n\n\t\t\trender( renderer, scene, camera );\n\n\t\t};\n\n\t\tthis.getRenderTarget = function () {\n\n\t\t\treturn renderTarget;\n\n\t\t};\n\n\t\tthis.dispose = function () {\n\n\t\t\trenderTarget.dispose();\n\t\t\tscope.material.dispose();\n\n\t\t};\n\n\t}\n\n}\n\nRefractor.RefractorShader = {\n\n\tuniforms: {\n\n\t\t'color': {\n\t\t\tvalue: null\n\t\t},\n\n\t\t'tDiffuse': {\n\t\t\tvalue: null\n\t\t},\n\n\t\t'textureMatrix': {\n\t\t\tvalue: null\n\t\t}\n\n\t},\n\n\tvertexShader: /* glsl */`\n\n\t\tuniform mat4 textureMatrix;\n\n\t\tvarying vec4 vUv;\n\n\t\tvoid main() {\n\n\t\t\tvUv = textureMatrix * vec4( position, 1.0 );\n\t\t\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n\n\t\t}`,\n\n\tfragmentShader: /* glsl */`\n\n\t\tuniform vec3 color;\n\t\tuniform sampler2D tDiffuse;\n\n\t\tvarying vec4 vUv;\n\n\t\tfloat blendOverlay( float base, float blend ) {\n\n\t\t\treturn( base < 0.5 ? ( 2.0 * base * blend ) : ( 1.0 - 2.0 * ( 1.0 - base ) * ( 1.0 - blend ) ) );\n\n\t\t}\n\n\t\tvec3 blendOverlay( vec3 base, vec3 blend ) {\n\n\t\t\treturn vec3( blendOverlay( base.r, blend.r ), blendOverlay( base.g, blend.g ), blendOverlay( base.b, blend.b ) );\n\n\t\t}\n\n\t\tvoid main() {\n\n\t\t\tvec4 base = texture2DProj( tDiffuse, vUv );\n\t\t\tgl_FragColor = vec4( blendOverlay( base.rgb, color ), 1.0 );\n\n\t\t\t#include <tonemapping_fragment>\n\t\t\t#include <encodings_fragment>\n\n\t\t}`\n\n};\n\nexport { Refractor };\n","import {\n\tBufferAttribute,\n\tBufferGeometry,\n\tFileLoader,\n\tLoader\n} from 'three';\n\nconst _taskCache = new WeakMap();\n\nclass DRACOLoader extends Loader {\n\n\tconstructor( manager ) {\n\n\t\tsuper( manager );\n\n\t\tthis.decoderPath = '';\n\t\tthis.decoderConfig = {};\n\t\tthis.decoderBinary = null;\n\t\tthis.decoderPending = null;\n\n\t\tthis.workerLimit = 4;\n\t\tthis.workerPool = [];\n\t\tthis.workerNextTaskID = 1;\n\t\tthis.workerSourceURL = '';\n\n\t\tthis.defaultAttributeIDs = {\n\t\t\tposition: 'POSITION',\n\t\t\tnormal: 'NORMAL',\n\t\t\tcolor: 'COLOR',\n\t\t\tuv: 'TEX_COORD'\n\t\t};\n\t\tthis.defaultAttributeTypes = {\n\t\t\tposition: 'Float32Array',\n\t\t\tnormal: 'Float32Array',\n\t\t\tcolor: 'Float32Array',\n\t\t\tuv: 'Float32Array'\n\t\t};\n\n\t}\n\n\tsetDecoderPath( path ) {\n\n\t\tthis.decoderPath = path;\n\n\t\treturn this;\n\n\t}\n\n\tsetDecoderConfig( config ) {\n\n\t\tthis.decoderConfig = config;\n\n\t\treturn this;\n\n\t}\n\n\tsetWorkerLimit( workerLimit ) {\n\n\t\tthis.workerLimit = workerLimit;\n\n\t\treturn this;\n\n\t}\n\n\tload( url, onLoad, onProgress, onError ) {\n\n\t\tconst loader = new FileLoader( this.manager );\n\n\t\tloader.setPath( this.path );\n\t\tloader.setResponseType( 'arraybuffer' );\n\t\tloader.setRequestHeader( this.requestHeader );\n\t\tloader.setWithCredentials( this.withCredentials );\n\n\t\tloader.load( url, ( buffer ) => {\n\n\t\t\tthis.decodeDracoFile( buffer, onLoad ).catch( onError );\n\n\t\t}, onProgress, onError );\n\n\t}\n\n\tdecodeDracoFile( buffer, callback, attributeIDs, attributeTypes ) {\n\n\t\tconst taskConfig = {\n\t\t\tattributeIDs: attributeIDs || this.defaultAttributeIDs,\n\t\t\tattributeTypes: attributeTypes || this.defaultAttributeTypes,\n\t\t\tuseUniqueIDs: !! attributeIDs\n\t\t};\n\n\t\treturn this.decodeGeometry( buffer, taskConfig ).then( callback );\n\n\t}\n\n\tdecodeGeometry( buffer, taskConfig ) {\n\n\t\tconst taskKey = JSON.stringify( taskConfig );\n\n\t\t// Check for an existing task using this buffer. A transferred buffer cannot be transferred\n\t\t// again from this thread.\n\t\tif ( _taskCache.has( buffer ) ) {\n\n\t\t\tconst cachedTask = _taskCache.get( buffer );\n\n\t\t\tif ( cachedTask.key === taskKey ) {\n\n\t\t\t\treturn cachedTask.promise;\n\n\t\t\t} else if ( buffer.byteLength === 0 ) {\n\n\t\t\t\t// Technically, it would be possible to wait for the previous task to complete,\n\t\t\t\t// transfer the buffer back, and decode again with the second configuration. That\n\t\t\t\t// is complex, and I don't know of any reason to decode a Draco buffer twice in\n\t\t\t\t// different ways, so this is left unimplemented.\n\t\t\t\tthrow new Error(\n\n\t\t\t\t\t'THREE.DRACOLoader: Unable to re-decode a buffer with different ' +\n\t\t\t\t\t'settings. Buffer has already been transferred.'\n\n\t\t\t\t);\n\n\t\t\t}\n\n\t\t}\n\n\t\t//\n\n\t\tlet worker;\n\t\tconst taskID = this.workerNextTaskID ++;\n\t\tconst taskCost = buffer.byteLength;\n\n\t\t// Obtain a worker and assign a task, and construct a geometry instance\n\t\t// when the task completes.\n\t\tconst geometryPending = this._getWorker( taskID, taskCost )\n\t\t\t.then( ( _worker ) => {\n\n\t\t\t\tworker = _worker;\n\n\t\t\t\treturn new Promise( ( resolve, reject ) => {\n\n\t\t\t\t\tworker._callbacks[ taskID ] = { resolve, reject };\n\n\t\t\t\t\tworker.postMessage( { type: 'decode', id: taskID, taskConfig, buffer }, [ buffer ] );\n\n\t\t\t\t\t// this.debug();\n\n\t\t\t\t} );\n\n\t\t\t} )\n\t\t\t.then( ( message ) => this._createGeometry( message.geometry ) );\n\n\t\t// Remove task from the task list.\n\t\t// Note: replaced '.finally()' with '.catch().then()' block - iOS 11 support (#19416)\n\t\tgeometryPending\n\t\t\t.catch( () => true )\n\t\t\t.then( () => {\n\n\t\t\t\tif ( worker && taskID ) {\n\n\t\t\t\t\tthis._releaseTask( worker, taskID );\n\n\t\t\t\t\t// this.debug();\n\n\t\t\t\t}\n\n\t\t\t} );\n\n\t\t// Cache the task result.\n\t\t_taskCache.set( buffer, {\n\n\t\t\tkey: taskKey,\n\t\t\tpromise: geometryPending\n\n\t\t} );\n\n\t\treturn geometryPending;\n\n\t}\n\n\t_createGeometry( geometryData ) {\n\n\t\tconst geometry = new BufferGeometry();\n\n\t\tif ( geometryData.index ) {\n\n\t\t\tgeometry.setIndex( new BufferAttribute( geometryData.index.array, 1 ) );\n\n\t\t}\n\n\t\tfor ( let i = 0; i < geometryData.attributes.length; i ++ ) {\n\n\t\t\tconst attribute = geometryData.attributes[ i ];\n\t\t\tconst name = attribute.name;\n\t\t\tconst array = attribute.array;\n\t\t\tconst itemSize = attribute.itemSize;\n\n\t\t\tgeometry.setAttribute( name, new BufferAttribute( array, itemSize ) );\n\n\t\t}\n\n\t\treturn geometry;\n\n\t}\n\n\t_loadLibrary( url, responseType ) {\n\n\t\tconst loader = new FileLoader( this.manager );\n\t\tloader.setPath( this.decoderPath );\n\t\tloader.setResponseType( responseType );\n\t\tloader.setWithCredentials( this.withCredentials );\n\n\t\treturn new Promise( ( resolve, reject ) => {\n\n\t\t\tloader.load( url, resolve, undefined, reject );\n\n\t\t} );\n\n\t}\n\n\tpreload() {\n\n\t\tthis._initDecoder();\n\n\t\treturn this;\n\n\t}\n\n\t_initDecoder() {\n\n\t\tif ( this.decoderPending ) return this.decoderPending;\n\n\t\tconst useJS = typeof WebAssembly !== 'object' || this.decoderConfig.type === 'js';\n\t\tconst librariesPending = [];\n\n\t\tif ( useJS ) {\n\n\t\t\tlibrariesPending.push( this._loadLibrary( 'draco_decoder.js', 'text' ) );\n\n\t\t} else {\n\n\t\t\tlibrariesPending.push( this._loadLibrary( 'draco_wasm_wrapper.js', 'text' ) );\n\t\t\tlibrariesPending.push( this._loadLibrary( 'draco_decoder.wasm', 'arraybuffer' ) );\n\n\t\t}\n\n\t\tthis.decoderPending = Promise.all( librariesPending )\n\t\t\t.then( ( libraries ) => {\n\n\t\t\t\tconst jsContent = libraries[ 0 ];\n\n\t\t\t\tif ( ! useJS ) {\n\n\t\t\t\t\tthis.decoderConfig.wasmBinary = libraries[ 1 ];\n\n\t\t\t\t}\n\n\t\t\t\tconst fn = DRACOWorker.toString();\n\n\t\t\t\tconst body = [\n\t\t\t\t\t'/* draco decoder */',\n\t\t\t\t\tjsContent,\n\t\t\t\t\t'',\n\t\t\t\t\t'/* worker */',\n\t\t\t\t\tfn.substring( fn.indexOf( '{' ) + 1, fn.lastIndexOf( '}' ) )\n\t\t\t\t].join( '\\n' );\n\n\t\t\t\tthis.workerSourceURL = URL.createObjectURL( new Blob( [ body ] ) );\n\n\t\t\t} );\n\n\t\treturn this.decoderPending;\n\n\t}\n\n\t_getWorker( taskID, taskCost ) {\n\n\t\treturn this._initDecoder().then( () => {\n\n\t\t\tif ( this.workerPool.length < this.workerLimit ) {\n\n\t\t\t\tconst worker = new Worker( this.workerSourceURL );\n\n\t\t\t\tworker._callbacks = {};\n\t\t\t\tworker._taskCosts = {};\n\t\t\t\tworker._taskLoad = 0;\n\n\t\t\t\tworker.postMessage( { type: 'init', decoderConfig: this.decoderConfig } );\n\n\t\t\t\tworker.onmessage = function ( e ) {\n\n\t\t\t\t\tconst message = e.data;\n\n\t\t\t\t\tswitch ( message.type ) {\n\n\t\t\t\t\t\tcase 'decode':\n\t\t\t\t\t\t\tworker._callbacks[ message.id ].resolve( message );\n\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\tcase 'error':\n\t\t\t\t\t\t\tworker._callbacks[ message.id ].reject( message );\n\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\tdefault:\n\t\t\t\t\t\t\tconsole.error( 'THREE.DRACOLoader: Unexpected message, \"' + message.type + '\"' );\n\n\t\t\t\t\t}\n\n\t\t\t\t};\n\n\t\t\t\tthis.workerPool.push( worker );\n\n\t\t\t} else {\n\n\t\t\t\tthis.workerPool.sort( function ( a, b ) {\n\n\t\t\t\t\treturn a._taskLoad > b._taskLoad ? - 1 : 1;\n\n\t\t\t\t} );\n\n\t\t\t}\n\n\t\t\tconst worker = this.workerPool[ this.workerPool.length - 1 ];\n\t\t\tworker._taskCosts[ taskID ] = taskCost;\n\t\t\tworker._taskLoad += taskCost;\n\t\t\treturn worker;\n\n\t\t} );\n\n\t}\n\n\t_releaseTask( worker, taskID ) {\n\n\t\tworker._taskLoad -= worker._taskCosts[ taskID ];\n\t\tdelete worker._callbacks[ taskID ];\n\t\tdelete worker._taskCosts[ taskID ];\n\n\t}\n\n\tdebug() {\n\n\t\tconsole.log( 'Task load: ', this.workerPool.map( ( worker ) => worker._taskLoad ) );\n\n\t}\n\n\tdispose() {\n\n\t\tfor ( let i = 0; i < this.workerPool.length; ++ i ) {\n\n\t\t\tthis.workerPool[ i ].terminate();\n\n\t\t}\n\n\t\tthis.workerPool.length = 0;\n\n\t\treturn this;\n\n\t}\n\n}\n\n/* WEB WORKER */\n\nfunction DRACOWorker() {\n\n\tlet decoderConfig;\n\tlet decoderPending;\n\n\tonmessage = function ( e ) {\n\n\t\tconst message = e.data;\n\n\t\tswitch ( message.type ) {\n\n\t\t\tcase 'init':\n\t\t\t\tdecoderConfig = message.decoderConfig;\n\t\t\t\tdecoderPending = new Promise( function ( resolve/*, reject*/ ) {\n\n\t\t\t\t\tdecoderConfig.onModuleLoaded = function ( draco ) {\n\n\t\t\t\t\t\t// Module is Promise-like. Wrap before resolving to avoid loop.\n\t\t\t\t\t\tresolve( { draco: draco } );\n\n\t\t\t\t\t};\n\n\t\t\t\t\tDracoDecoderModule( decoderConfig ); // eslint-disable-line no-undef\n\n\t\t\t\t} );\n\t\t\t\tbreak;\n\n\t\t\tcase 'decode':\n\t\t\t\tconst buffer = message.buffer;\n\t\t\t\tconst taskConfig = message.taskConfig;\n\t\t\t\tdecoderPending.then( ( module ) => {\n\n\t\t\t\t\tconst draco = module.draco;\n\t\t\t\t\tconst decoder = new draco.Decoder();\n\t\t\t\t\tconst decoderBuffer = new draco.DecoderBuffer();\n\t\t\t\t\tdecoderBuffer.Init( new Int8Array( buffer ), buffer.byteLength );\n\n\t\t\t\t\ttry {\n\n\t\t\t\t\t\tconst geometry = decodeGeometry( draco, decoder, decoderBuffer, taskConfig );\n\n\t\t\t\t\t\tconst buffers = geometry.attributes.map( ( attr ) => attr.array.buffer );\n\n\t\t\t\t\t\tif ( geometry.index ) buffers.push( geometry.index.array.buffer );\n\n\t\t\t\t\t\tself.postMessage( { type: 'decode', id: message.id, geometry }, buffers );\n\n\t\t\t\t\t} catch ( error ) {\n\n\t\t\t\t\t\tconsole.error( error );\n\n\t\t\t\t\t\tself.postMessage( { type: 'error', id: message.id, error: error.message } );\n\n\t\t\t\t\t} finally {\n\n\t\t\t\t\t\tdraco.destroy( decoderBuffer );\n\t\t\t\t\t\tdraco.destroy( decoder );\n\n\t\t\t\t\t}\n\n\t\t\t\t} );\n\t\t\t\tbreak;\n\n\t\t}\n\n\t};\n\n\tfunction decodeGeometry( draco, decoder, decoderBuffer, taskConfig ) {\n\n\t\tconst attributeIDs = taskConfig.attributeIDs;\n\t\tconst attributeTypes = taskConfig.attributeTypes;\n\n\t\tlet dracoGeometry;\n\t\tlet decodingStatus;\n\n\t\tconst geometryType = decoder.GetEncodedGeometryType( decoderBuffer );\n\n\t\tif ( geometryType === draco.TRIANGULAR_MESH ) {\n\n\t\t\tdracoGeometry = new draco.Mesh();\n\t\t\tdecodingStatus = decoder.DecodeBufferToMesh( decoderBuffer, dracoGeometry );\n\n\t\t} else if ( geometryType === draco.POINT_CLOUD ) {\n\n\t\t\tdracoGeometry = new draco.PointCloud();\n\t\t\tdecodingStatus = decoder.DecodeBufferToPointCloud( decoderBuffer, dracoGeometry );\n\n\t\t} else {\n\n\t\t\tthrow new Error( 'THREE.DRACOLoader: Unexpected geometry type.' );\n\n\t\t}\n\n\t\tif ( ! decodingStatus.ok() || dracoGeometry.ptr === 0 ) {\n\n\t\t\tthrow new Error( 'THREE.DRACOLoader: Decoding failed: ' + decodingStatus.error_msg() );\n\n\t\t}\n\n\t\tconst geometry = { index: null, attributes: [] };\n\n\t\t// Gather all vertex attributes.\n\t\tfor ( const attributeName in attributeIDs ) {\n\n\t\t\tconst attributeType = self[ attributeTypes[ attributeName ] ];\n\n\t\t\tlet attribute;\n\t\t\tlet attributeID;\n\n\t\t\t// A Draco file may be created with default vertex attributes, whose attribute IDs\n\t\t\t// are mapped 1:1 from their semantic name (POSITION, NORMAL, ...). Alternatively,\n\t\t\t// a Draco file may contain a custom set of attributes, identified by known unique\n\t\t\t// IDs. glTF files always do the latter, and `.drc` files typically do the former.\n\t\t\tif ( taskConfig.useUniqueIDs ) {\n\n\t\t\t\tattributeID = attributeIDs[ attributeName ];\n\t\t\t\tattribute = decoder.GetAttributeByUniqueId( dracoGeometry, attributeID );\n\n\t\t\t} else {\n\n\t\t\t\tattributeID = decoder.GetAttributeId( dracoGeometry, draco[ attributeIDs[ attributeName ] ] );\n\n\t\t\t\tif ( attributeID === - 1 ) continue;\n\n\t\t\t\tattribute = decoder.GetAttribute( dracoGeometry, attributeID );\n\n\t\t\t}\n\n\t\t\tgeometry.attributes.push( decodeAttribute( draco, decoder, dracoGeometry, attributeName, attributeType, attribute ) );\n\n\t\t}\n\n\t\t// Add index.\n\t\tif ( geometryType === draco.TRIANGULAR_MESH ) {\n\n\t\t\tgeometry.index = decodeIndex( draco, decoder, dracoGeometry );\n\n\t\t}\n\n\t\tdraco.destroy( dracoGeometry );\n\n\t\treturn geometry;\n\n\t}\n\n\tfunction decodeIndex( draco, decoder, dracoGeometry ) {\n\n\t\tconst numFaces = dracoGeometry.num_faces();\n\t\tconst numIndices = numFaces * 3;\n\t\tconst byteLength = numIndices * 4;\n\n\t\tconst ptr = draco._malloc( byteLength );\n\t\tdecoder.GetTrianglesUInt32Array( dracoGeometry, byteLength, ptr );\n\t\tconst index = new Uint32Array( draco.HEAPF32.buffer, ptr, numIndices ).slice();\n\t\tdraco._free( ptr );\n\n\t\treturn { array: index, itemSize: 1 };\n\n\t}\n\n\tfunction decodeAttribute( draco, decoder, dracoGeometry, attributeName, attributeType, attribute ) {\n\n\t\tconst numComponents = attribute.num_components();\n\t\tconst numPoints = dracoGeometry.num_points();\n\t\tconst numValues = numPoints * numComponents;\n\t\tconst byteLength = numValues * attributeType.BYTES_PER_ELEMENT;\n\t\tconst dataType = getDracoDataType( draco, attributeType );\n\n\t\tconst ptr = draco._malloc( byteLength );\n\t\tdecoder.GetAttributeDataArrayForAllPoints( dracoGeometry, attribute, dataType, byteLength, ptr );\n\t\tconst array = new attributeType( draco.HEAPF32.buffer, ptr, numValues ).slice();\n\t\tdraco._free( ptr );\n\n\t\treturn {\n\t\t\tname: attributeName,\n\t\t\tarray: array,\n\t\t\titemSize: numComponents\n\t\t};\n\n\t}\n\n\tfunction getDracoDataType( draco, attributeType ) {\n\n\t\tswitch ( attributeType ) {\n\n\t\t\tcase Float32Array: return draco.DT_FLOAT32;\n\t\t\tcase Int8Array: return draco.DT_INT8;\n\t\t\tcase Int16Array: return draco.DT_INT16;\n\t\t\tcase Int32Array: return draco.DT_INT32;\n\t\t\tcase Uint8Array: return draco.DT_UINT8;\n\t\t\tcase Uint16Array: return draco.DT_UINT16;\n\t\t\tcase Uint32Array: return draco.DT_UINT32;\n\n\t\t}\n\n\t}\n\n}\n\nexport { DRACOLoader };\n"],"names":[],"version":3,"file":"index.d7358446.js.map","sourceRoot":"/__parcel_source_root/"}